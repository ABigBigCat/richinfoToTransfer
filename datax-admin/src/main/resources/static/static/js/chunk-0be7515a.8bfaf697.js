(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0be7515a"],{"246e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"执行器"},model:{value:t.listQuery.registryKey,callback:function(e){t.$set(t.listQuery,"registryKey",e)},expression:"listQuery.registryKey"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.fetchData}},[t._v("\n      Search\n    ")])],1),t._v(" "),t._l(t.list,(function(e){return a("div",{key:e.id,staticClass:"container"},[a("p",[a("span",{staticClass:"fl"},[t._v("拓扑：topology-executor")]),a("span",{staticClass:"fl"},[t._v("  注册地址："+t._s(e.registryValue))]),a("span",{staticClass:"fr"},[t._v("更新时间："+t._s(e.updateTime))])]),t._v(" "),a("div",{class:e.id+" fl",staticStyle:{width:"30%",height:"300px"}}),t._v(" "),a("div",{class:e.id+" fl",staticStyle:{width:"30%",height:"300px"}}),t._v(" "),a("div",{class:e.id+" fl loadAverage",staticStyle:{width:"30%",height:"300px"}},[a("p",{staticClass:"title"},[t._v("平均负载")]),t._v(" "),a("p",{staticClass:"number"},[t._v(t._s(e.loadAverage>=0?e.loadAverage:0))])])])})),t._v(" "),a("div",[t._m(0),t._v(" "),a("div",{staticStyle:{width:"50%",height:"400px",position:"relative"}},[t.migrate_monitor_show?a("div",{staticClass:"return",on:{click:function(e){t.migrate_monitor(),t.migrate_monitor_show=!t.migrate_monitor_show}}}):t._e(),t._v(" "),a("div",{ref:"migrate_monitor",staticStyle:{width:"100%",height:"260px"},attrs:{id:"migrate_monitor"}})])])],2)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",{staticClass:"fl"},[t._v("迁移并行任务监控")])])}],n=(a("ac6a"),a("96cf"),a("1da1")),s=a("b775");function o(t){return Object(s["a"])({url:"/api/jobRegistry",method:"get",params:t})}function l(t){return Object(s["a"])({url:"/api/monitortask/list",method:"get",params:t})}var c=a("6724"),u={name:"Registry",directives:{waves:c["a"]},filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},data:function(){return{list:null,listLoading:!0,migrate_monitor_show:!1,total:0,listQuery:{current:1,size:10,registryKey:void 0},dialogPluginVisible:!1}},created:function(){this.fetchData()},mounted:function(){var t=this;this.$nextTick((function(){t.migrate_monitor()}))},methods:{fetchData:function(){var t=this;this.listLoading=!0,this.list=[],o(this.listQuery).then((function(e){var a=e.records,i=e.total;t.total=i,t.list=a,t.listLoading=!1,t.$nextTick((function(){for(var t=0;t<this.list.length;t++)this.initEcharts(this.list[t])}))}))},initEcharts:function(t){var e=this.$echarts.init(document.getElementsByClassName(t.id)[0]),a={title:{text:"cpu使用率",subtext:"",x:"center"},tooltip:{formatter:"{a} <br/>{b} : {c}%"},toolbox:{feature:{restore:{},saveAsImage:{}},show:!1},series:[{name:"cpu使用率",type:"gauge",max:100,radius:"70%",startAngle:215,endAngle:-35,detail:{formatter:"{value}%"},data:[{value:t.cpuUsage,name:""}]}]};e.setOption(a);var i=this.$echarts.init(document.getElementsByClassName(t.id)[1]),r={title:{text:"内存使用率",subtext:"",x:"center"},tooltip:{formatter:"{a} <br/>{b} : {c}%"},toolbox:{feature:{restore:{},saveAsImage:{}},show:!1},series:[{name:"内存使用率",type:"gauge",max:100,radius:"70%",startAngle:215,endAngle:-35,detail:{formatter:"{value}%"},data:[{value:t.memoryUsage,name:""}]}]};i.setOption(r)},migrate_monitor:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,i,r,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l().then((function(t){return t.content}));case 2:e=t.sent,a=[],i=[],e.forEach((function(t,e){t.value=t.tasks,t.name=t.label,a.push(t),i.push(t.label)})),r=this.$echarts.init(this.$refs.migrate_monitor),s={title:{text:"迁移任务数",x:"center",y:"top"},tooltip:{trigger:"item",formatter:"当前并发数: {c}"},legend:[{top:30,textStyle:{fontSize:14,color:"#000"},data:i,formatter:function(t){return"".concat(t,"任务")}}],series:[{name:"迁移监控",type:"pie",radius:"50%",center:["50%","60%"],labelLine:{normal:{color:"#000"}},label:{normal:{color:"#000",formatter:"{b}"}},data:a,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{color:function(t){var e=["#4772ff","#2495ff","#f6d13b","#2bcafe","#ff8b3e","#34dfdc","#4db67e","#ffb03e","#57ae28","#ff625e"];return e[t.dataIndex]}}}}]},r.setOption(s),o=this,r.on("click",function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("params",e),!o.migrate_monitor_show){t.next=4;break}t.next=11;break;case 4:if(e.data.model){t.next=6;break}return t.abrupt("return",!1);case 6:a=[],i=[],e.data.model.forEach((function(t,e){t.value=t.rate,a.push(t),i.push(t.label)})),o.migrate_monitor_show=!0,r.setOption({title:{text:"迁移速率",x:"center",y:"top"},tooltip:{trigger:"item",formatter:"当前速率 : {c}M/s"},legend:[{top:30,textStyle:{fontSize:14,color:"#000"},data:i,formatter:function(t){return"".concat(e.data.label," -> ").concat(t)}}],series:[{name:"params.data.name",type:"pie",radius:"50%",center:["50%","60%"],labelLine:{normal:{color:"#000"}},label:{normal:{color:"#000",formatter:"{b} \n {c}M/s"}},data:a,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{color:function(t){var e=["#4772ff","#2495ff","#f6d13b","#2bcafe","#ff8b3e","#34dfdc","#4db67e","#ffb03e","#57ae28","#ff625e"];return e[t.dataIndex]}}}}]});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},d=u,f=(a("e4bc"),a("2877")),m=Object(f["a"])(d,i,r,!1,null,null,null);e["default"]=m.exports},6724:function(t,e,a){"use strict";a("8d41");var i="@@wavesContext";function r(t,e){function a(a){var i=Object.assign({},e.value),r=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),n=r.ele;if(n){n.style.position="relative",n.style.overflow="hidden";var s=n.getBoundingClientRect(),o=n.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":(o=document.createElement("span"),o.className="waves-ripple",o.style.height=o.style.width=Math.max(s.width,s.height)+"px",n.appendChild(o)),r.type){case"center":o.style.top=s.height/2-o.offsetHeight/2+"px",o.style.left=s.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(a.pageY-s.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(a.pageX-s.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=r.color,o.className="waves-ripple z-active",!1}}return t[i]?t[i].removeHandle=a:t[i]={removeHandle:a},a}var n={bind:function(t,e){t.addEventListener("click",r(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[i].removeHandle,!1),t.addEventListener("click",r(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[i].removeHandle,!1),t[i]=null,delete t[i]}},s=function(t){t.directive("waves",n)};window.Vue&&(window.waves=n,Vue.use(s)),n.install=s;e["a"]=n},"6c41":function(t,e,a){},"8d41":function(t,e,a){},e4bc:function(t,e,a){"use strict";var i=a("6c41"),r=a.n(i);r.a}}]);